<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		 
			
  
    <meta name="twitter:card" content="summary"/>
    
      <meta name="twitter:image" content="https://ngc7292.github.io/images/avatar.png" />
    
  
  
  <meta name="twitter:title" content="shapley合作对策"/>
  <meta name="twitter:description" content="shapley合作对策

shapley值作为一种利益分配算法，考虑到了所有的人对总目标的贡献程度，避免分配上的平均主义，但是，首先需要对其中所有成员的组合利益有着较为准确的预期，每个参与者在参与的时候每个组合的贡献都会影响到最后的输出结果，对于总效益不确定的情况下可以采用AHP法，ANP法以及模糊数学等方法来估算个联盟之间的可能效用值，再进行具体利益上的分配。

"/>
  
    <meta name="twitter:site" content="@ngc7293"/>
  
  
  
  
    <meta name="twitter:creator" content="@ngc7293"/>
  



		
		<meta name="author" content="ngc7293">
		
		<meta name="generator" content="Hugo 0.42.2" />
		<title>shapley合作对策 &middot; ngc7293&#39;s blog</title>
		<link rel="shortcut icon" href="https://ngc7292.github.io/images/favicon.ico">
		<link rel="stylesheet" href="https://ngc7292.github.io/css/style.css">
		<link rel="stylesheet" href="https://ngc7292.github.io/css/highlight.css">

		
		<link rel="stylesheet" href="https://ngc7292.github.io/css/font-awesome.min.css">
		

		
		<link href="https://ngc7292.github.io/index.xml" rel="alternate" type="application/rss+xml" title="ngc7293&#39;s blog" />
		

		

		<script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>
	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='https://ngc7292.github.io/'> <span class="arrow">←</span>Home</a>
	
	<a href='https://ngc7292.github.io/posts'>Archive</a>
	<a href='https://ngc7292.github.io/tags'>Tags</a>
	<a href='https://ngc7292.github.io/about'>About</a>

	

	
	<a class="cta" href="https://ngc7292.github.io/index.xml">Subscribe</a>
	
</nav>


        <section id="wrapper" class="post">
            <article>
                <header>
                    <h1>
                        shapley合作对策
                    </h1>
                    <h2 class="headline">
                    Jul 13, 2018 00:00
                    · 517 words
                    · 3 minute read
                      <span class="tags">
                      
                      </span>
                    </h2>
                </header>
                
                  
                    <div id="toc">
                      <nav id="TableOfContents">
<ul>
<li><a href="#shapley合作对策">shapley合作对策</a>
<ul>
<li><a href="#污水处理问题">污水处理问题</a>
<ul>
<li>
<ul>
<li><a href="#1-2合作">1,2合作</a></li>
<li><a href="#2-3合作">2,3合作</a></li>
<li><a href="#1-2-3合作">1,2,3合作</a></li>
</ul></li>
</ul></li>
<li><a href="#shapley合作对策-1">shapley合作对策</a></li>
<li><a href="#其他合作策略">其他合作策略</a>
<ul>
<li><a href="#协商解">协商解</a></li>
<li><a href="#nash解">Nash解</a></li>
<li><a href="#最小距离解">最小距离解</a></li>
<li><a href="#满意解">满意解</a></li>
<li><a href="#raiffi-解">$$ Raiffi 解 $$</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
                    </div>
                  
                
                <section id="post-body">
                    <h1 id="shapley合作对策">shapley合作对策</h1>

<p>shapley值作为一种利益分配算法，考虑到了所有的人对总目标的贡献程度，避免分配上的平均主义，但是，首先需要对其中所有成员的组合利益有着较为准确的预期，每个参与者在参与的时候每个组合的贡献都会影响到最后的输出结果，对于总效益不确定的情况下可以采用AHP法，ANP法以及模糊数学等方法来估算个联盟之间的可能效用值，再进行具体利益上的分配。</p>

<p></p>

<h2 id="污水处理问题">污水处理问题</h2>

<p>数学建模课的一道题：</p>

<p>存在三个城镇，需要进行污水处理进行排污，每个城市都紧靠河流，Q1，Q2之间距离为20KM，Q2，Q3之间距离为38KM，$ Q_1 = 5 $ , $ Q_2 = 3 $ , $ Q_3 = 5 $ 建厂费用为
$$ P_1 = 73Q^{0.712} $$管道费用$$ P_2 = 0.66Q^{0.51} $$ 三城镇可以联合建厂，也可以各自建厂，需要建厂成本最小。</p>

<p>其中，有两种大方法，首先，各自建厂，其成本各自为</p>

<p>$$ C_1 = 73*5^{0.712} = 230 $$</p>

<p>$$ C_2 = 73*3^{0.712} = 160 $$</p>

<p>$$ C_3 = 73*5^{0.712} = 230 $$</p>

<p>合作建厂时，存在4种情况（3种，其中1，3合作不会实现）</p>

<h4 id="1-2合作">1,2合作</h4>

<p>$$ C_{12} = 73*(5+3)^{0.712}+0.66*5^{0.51}*20 = 350 $$</p>

<p>$$ D<em>{12} = C</em>{12}+C_3 = 580 $$</p>

<h4 id="2-3合作">2,3合作</h4>

<p>$$ C_{23} = 73*(5+3)^{0.712}+0.66*3^{0.51}*20 = 365 $$</p>

<p>$$ D<em>{23} = C</em>{23}+C_1 = 595 $$</p>

<h4 id="1-2-3合作">1,2,3合作</h4>

<p>$$ D_{123} = 73*(5+3+5)^{0.712}+0.66*5^{0.51}<em>20+0.66</em>(5+3)^{0.51}*38 = 556 $$</p>

<p>由此可见，当1，2，3合作建厂的时候，我们可以得到最小的建厂成本。</p>

<p>但是，当成本分配时，便应该通过合作分配的方法来对成本进行分流，若按照d3由城1,2按 5:3分担, d2由城1担负，则城1需要分担250的成本，不如自己建厂划算。正是由于这个原因，我们需要找到一种方法，对哥哥成本进行分配。</p>

<h2 id="shapley合作对策-1">shapley合作对策</h2>

<p>针对集合$$ I = {1,2,&hellip;,n} \forall 子集 s\in I \exists 实函数 v(s)$$</p>

<p>满足</p>

<p>$$ v(\varnothing) = 0 $$与</p>

<p>$$ v(s_1\cap s_2) \geqslant v(s_1)+v(s_2) , s_1\cap s_2 = \varnothing $$
ps:
$v(s)$是子集s的获利。</p>

<p>由此，求出公理化方法，shapley值：
$$ x<em>i = \sum</em>{s \in S_i}w(|s|)[v(s)-v(s/i)],i=1,2,&hellip;,n $$
$$ w(|x|) = \frac{(n-|s|)!(|s|-1)!}{n!} $$
ps:
$ |s| $ 是子集中的元素数目 ， $ S_i $是包含$i$的所有子集
$ [v(s)-v(s/i)] $是i对合作s的贡献
$ w(|x|) $是$ |s| $决定的“贡献”的权重</p>

<p>所以，上题可以得到关于投资建厂的各个shapley值：
首先求得特征函数$ v(x) $:
$$ v(1)=v(2)=v(3)=0 $$
$$ v(1\cap2) = C(1) + C(2) - C(12) = 40 $$
$$ v(2\cap3) = C(12) + C(3) - C(23) = 25 $$
$$ v(1\cap3) =  $$
$$ v(I) = C(1) + C(2) + C(3) - C(1,2,3) = 64 $$</p>

<p>对于城1的成本中获益分配：</p>

<table>
<thead>
<tr>
<th align="center">$ s $</th>
<th align="center">1</th>
<th align="center">$ 1 \cap 2 $</th>
<th align="center">$ 1 \cap 3 $</th>
<th align="center">$ I $</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">$ v(s) $</td>
<td align="center">0</td>
<td align="center">40</td>
<td align="center">0</td>
<td align="center">64</td>
</tr>

<tr>
<td align="center">$ v(s/1) $</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">25</td>
</tr>

<tr>
<td align="center">$ v(s)-v(s/1) $</td>
<td align="center">0</td>
<td align="center">40</td>
<td align="center">0</td>
<td align="center">39</td>
</tr>

<tr>
<td align="center">$</td>
<td align="center">s</td>
<td align="center">$</td>
<td align="center">1</td>
<td align="center">2</td>
</tr>

<tr>
<td align="center">$ w(</td>
<td align="center">s</td>
<td align="center">) $</td>
<td align="center"><sup>1</sup>&frasl;<sub>3</sub></td>
<td align="center"><sup>1</sup>&frasl;<sub>6</sub></td>
</tr>

<tr>
<td align="center">$ w(</td>
<td align="center">s</td>
<td align="center">)[v(s)-v(s/i)] $</td>
<td align="center">0</td>
<td align="center">6.7</td>
</tr>
</tbody>
</table>

<p>同理，可以得到城2与城3的 $ x $ 值，$x_1 = 19.7, x_2 = 32.1, x_3 = 12.2$ ,三城在总投资556中的分担:</p>

<p>城1 $ C(1)-x_1=210.3 $,
城2 $ C(2)-x_2=127.9 $,
城3 $ C(3)-x_3=217.8 $.</p>

<p>其优点是有公理化基础，缺点是需要的条件太多，对于一些现实问题没有那么多的特征函数。</p>

<h2 id="其他合作策略">其他合作策略</h2>

<p>如n个单位治理污染, 通常知道第i方单独治理的投资yi 和n方共 同治理的投资$ Y $, 及第$i$方不参加时其余$ n-1 $方的投资$ z_i (i=1,2, &hellip;n) $. 确定共同治理时各方分担的费用。</p>

<p>若定义特征函数为合作的获利(节约的投资)，则有</p>

<p>$$v(i) = 0,i=1,2,&hellip;,n$$</p>

<p>$$v(I) = \sum_{i=1}^{n}y<em>i-Y,v(I/i) = \sum</em>{j\neq i}y_i-z_i$$</p>

<p>其他的并不知道所以无法用shapley值进行求解，所以我们可以用以下几种方法进行求解：</p>

<ul>
<li>协商解</li>
<li>Nash解</li>
<li>最小距离解</li>
<li>满意解</li>
<li>$ Raiffi $ 解</li>
</ul>

<h3 id="协商解">协商解</h3>

<p>以$n-1$方合作的获利为下限，设$$ \sum{x_i} = B $$</p>

<p>$$ \sum x_i - x_1 \geqslant b_1 $$
$$ &hellip; $$
$$ \sum x_i - x_n \geqslant b_n $$</p>

<p>得到 $$ Ax^T \geqslant b^T $$</p>

<p>求解 $$ Ax^T = b^T \Rightarrow x_i = \frac{1}{n11}\sum b_i-b_i ~ x_i $$ 的下限。</p>

<p>$$ x_i = x_i + \frac{1}{n}(B-\sum x_i) = \frac{1}{n}\sum b_i-b_i + \frac{B}{n}$$</p>

<h3 id="nash解">Nash解</h3>

<p>记$ d = (d_1,d_2,&hellip;,d_n) $作为现状点（谈判时的威慑点），在此基础上“均匀的”分配给全体合作的获利$B$。</p>

<p>$$ max \prod_{i}(x_i-d_i) $$
$$ s.t. \sum x_i = B $$
$$ x_i \geqslant d_i $$
$$ \Rightarrow x_i = d_i + \frac{1}{n}(B-\sum d_i) $$</p>

<p>$ d_i = 0 $时，平均分配获利B，$ d_i = x_i $时，Nash解可以化为协商解。</p>

<h3 id="最小距离解">最小距离解</h3>

<p>#记$$ \bar{x} = \bar{x_1},&hellip;,\bar{x_n} $$为上限</p>

<p>$$ min\sum_{i}(x_i-\bar{x_i})^2 $$</p>

<p>$$ s.t. \sum{x_i} = B,x_i \leqslant \bar{x_i} $$</p>

<p>$$ \Rightarrow x_i = \bar{x_i} - \frac{1}{n}(\sum{\bar{x_i} - B})$$</p>

<p>若令</p>

<p>$$ \bar{x_i}=B-b \Rightarrow \frac{1}{n}\sum{b_i}-b_i + \frac{B}{n}$$</p>

<p>计算第i方的边际效益从而转化为协商解</p>

<h3 id="满意解">满意解</h3>

<p>满意度设为$$ u_i = \frac{x_i-d_i}{e_i-d_i} $$</p>

<p>$d_i$为现状点（最低点）$e_i$为理想点（最高点）</p>

<p>$$ max(min_i{u_i}) $$</p>

<p>$$ s.t. \sum x_i = B $$</p>

<p>$$ \Rightarrow u_i = \frac{B-\sum d_i}{\sum e_i-\sum d_i }$$</p>

<p>$$ x_i = d_i + u_i(e_i-d_i)$$</p>

<p>$$ d_i = x ,e_i = \bar{x_i} $$为基于满意度的解，化为协商解
$$ d_i = 0,e_i = \bar{x_i}$$,$$ x_i = \frac{\bar{x_i}}{\sum{\bar{x_i}}}B $$,按比例分配</p>

<h3 id="raiffi-解">$$ Raiffi 解 $$</h3>

<!-- 我的妈呀这么累 -->

<p>感觉类似1VN的思想，在x的基础上进行B的分配，当j参与（原来无j的）n-1方合作时，获利为$$ B-b_j = \bar{x_j}$$</p>

<p>$$ \bar{x_j} $$先由 j 和n-1方平分，n-1方再平分</p>
                </section>
            </article>

            
                <a class="twitter" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fngc7292.github.io%2fposts%2fshapley%2f - shpaley by @ngc7293"><span class="icon-twitter"> tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

            

            
                <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'ngc7293s-blog'; 

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://ngc7293s-blog.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            

            

            <footer id="footer">
    
        <div id="social">

	
	
    <a class="symbol" href="https://www.facebook.com/">
        <i class="fa fa-facebook-square"></i>
    </a>
    
    <a class="symbol" href="https://www.github.com/ngc7292">
        <i class="fa fa-github-square"></i>
    </a>
    
    <a class="symbol" href="https://www.twitter.com/">
        <i class="fa fa-twitter-square"></i>
    </a>
    


</div>

    
    <p class="small">
    
       © Copyright 2019 <i class="fa fa-heart" aria-hidden="true"></i> ngc7293
    
    </p>
    <p class="small">
        Powered by <a href="http://www.gohugo.io/">Hugo</a> Theme By <a href="https://github.com/nodejh/hugo-theme-cactus-plus">nodejh</a>
    </p>
</footer>

        </section>

        <script src="https://ngc7292.github.io/js/jquery-2.2.4.min.js"></script>
<script src="https://ngc7292.github.io/js/main.js"></script>
<script src="https://ngc7292.github.io/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




  
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'ngc7293', 'auto');
	
	ga('send', 'pageview');
}
</script>





    </body>
</html>
